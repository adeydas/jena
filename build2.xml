<project xmlns:ivy="antlib:org.apache.ivy.ant" name="lib2">

  <import file="build.xml"/>

  
  
  <!-- Make artifacts -->

  <!-- Two jars -->
  
  <!-- do for both POMs -->
  <target name="pom-artifact">
     <!-- <delete file="${artifacts.dir}/${pomfile}"/> -->
     <copy file="${pomfile.template}" tofile="${artifacts.dir}/${pomfile}">
       <filterset>
         <!-- <filterset refid="filters.shared"/> -->
         <filter token="VERSION" value="${version}"/>
       </filterset>
     </copy>
   </target>
  
  <!-- depends="ivy-init,artifacts,publish-check" description="Publish ARQ" -->
  <target name="ivy-publish-dev" >
    <publish-module ivy.file="ivy.xml" resolver="dev-resolver"/>
    <publish-module ivy.file="ivy-extra.xml" resolver="dev-resolver"/>
  </target>
  
  <target name="ivy-publish">
      <publish-module ivy.file="ivy.xml"/>
      <publish-module ivy.file="ivy-extra.xml"/>
    </target>

  <!-- Macros (see also "arq-publish-one") -->

  <macrodef name="publish-module">
   <attribute name="ivy.file"/>
   <attribute name="resolver" default="dev-publish"/>
   
   <sequential>
     <ivy:resolve file="@{ivy.file}"/>
     <ivy:publish conf="main" 
		  resolver="@{resolver}" 
		  overwrite="true"
		  forcedeliver="true">
      <artifacts pattern="${artifacts.dir}/[artifact]-[revision](-[classifier]).[ext]" />
     </ivy:publish>
   </sequential>
</macrodef>

</project>