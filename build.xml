<project xmlns:ivy="antlib:org.apache.ivy.ant" name="TDB" default="build">

  <!-- Configuration as a properties file ? -->
  <!-- <property file="tdb-build.properties"/> -->

  <!-- ========================================== -->
  <!-- ==== Configuration -->
  <property name="Name"             	value="TDB"/>
  <property name="name"                 value="tdb"/>

  <property environment="env"/>

  <!-- Version  -->
  <property name="version"              value="0.8.5-SNAPSHOT"/>
  <property name="javadoc.window.title"   value="${Name}-0.8 Javadoc"/>

  <!-- Coordinate with ivysetting.xml -->
  <!-- repo-main, repo-dev, repo-local -->
  <property name="publish.repo"     value="repo-dev"/>
  
  <!-- javadoc -->
  <property name="copyright.text"
	    value="Copyright &#169; 2007, 2008, 2009 Hewlett-Packard Development Company, LP"/>
  <property name="javadoc.packages"     value="com.hp.hpl.jena.tdb"/>
  <property name="javadoc.all.packages" value="com.hp.hpl.jena.tdb.*"/>
  
  <target name="main" depends="jar"/>

  <!-- Sources as a path -->
  <property name="src.dir"              value="src/main/java"/>
  <property name="src.test.dir"         value="src/test/java"/>
  <property name="src.examples.dir"     value="src-examples"/>
  <property name="src.dev.dir"          value="src-dev"/>

  <!-- Metadata -->
  <property name="build.metadata.file"	       value="com/hp/hpl/jena/tdb/tdb-properties.xml"/>
  <property name="build.metadata.file.src"     value="resources/tdb-properties.xml"/>

  <!-- Source code -->
  <path id="java.source.path.main">
    <pathelement path="${src.dir}"/>
  </path>    

  <path id="java.source.path.test">
    <pathelement path="${src.test.dir}"/>
  </path>    

  <!--
  <path id="java.source.path">
    <path refid="java.source.path.main"/>
    <path refid="java.source.path.test"/>
  </path>
  -->

  <!-- Sources as fileset (want path=>fileset to avoid the duplication here) -->

  <fileset dir="." id="fileset.src">
    <include name="${src.dir}/**/*.java"/>
    <include name="${src.test.dir}/**/*.java"/>
  </fileset>

<!--
   <pathconvert pathsep="," property="fileset.src" refid="java.source.path">
   All java files
   </pathconvert>
  
   <echo>${fileset.src}</echo>
-->

  <import file="lib-build/build-lib.xml"/>
  <!-- The target "release" - make a distribution and zip it -->
  <import file="lib-build/build-dist.xml"/>

  <target name="publish-release" depends="clean-once,publish,release"/>
  <!-- Redefine to include zip making -->
  <target name="deploy" depends="publish-release"/>

  <target name="pre-run-junit">
    <mkdir dir="tmp/testing"/>
  </target>

</project>
