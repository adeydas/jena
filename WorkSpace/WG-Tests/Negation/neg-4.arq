PREFIX  xsd:    <http://www.w3.org/2001/XMLSchema#>
PREFIX ex: <negation/temporal-exclusion#>
PREFIX dc: <http://purl.org/dc/elements/1.1/>
# The closest pre-operative physical examination
SELECT ?exam ?date {
  ?exam a ex:PhysicalExamination;
        dc:date ?date .
  ?op   a ex:SurgicalProcedure; dc:date ?opDT .
  #MINUS {
  FILTER NOT EXISTS {
    ?otherExam a ex:PhysicalExamination; dc:date ?otherExDT
    FILTER(?date < ?otherExDT && ?otherExDT < ?opDT)
  }
  FILTER(?date < ?opDT)
}
